<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ANALYTICS-001: 실시간 참여도 대시보드 - EduForum</title>
  <link rel="stylesheet" href="../css/variables.css">
  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/components.css">
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <style>
    body {
      background: hsl(var(--background));
      margin: 0;
      padding: 0;
    }

    /* Full View Mode - 전체 화면 */
    .full-view-container {
      min-height: 100vh;
      padding: var(--spacing-4);
      background: hsl(var(--background));
    }

    .full-view-container .page-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: var(--spacing-4);
      padding-bottom: var(--spacing-4);
      border-bottom: 1px solid hsl(var(--border));
    }

    .full-view-container .header-title {
      display: flex;
      align-items: center;
      gap: var(--spacing-3);
    }

    .full-view-container .header-title h1 {
      font-size: var(--text-2xl);
      font-weight: var(--font-bold);
      margin: 0;
    }

    .full-view-container .header-actions {
      display: flex;
      align-items: center;
      gap: var(--spacing-3);
    }

    .session-badge {
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
      padding: var(--spacing-2) var(--spacing-3);
      background: hsl(var(--success) / 0.1);
      color: hsl(var(--success));
      border-radius: var(--radius-full);
      font-size: var(--text-sm);
      font-weight: var(--font-medium);
    }

    .session-badge .dot {
      width: 8px;
      height: 8px;
      background: hsl(var(--success));
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* Full View Styles */
    .content-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--spacing-4);
    }

    .content-grid .full-width {
      grid-column: 1 / -1;
    }

    .overview-card {
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius-lg);
      padding: var(--spacing-4);
    }
    .overview-stats {
      display: flex;
      gap: var(--spacing-6);
      margin-bottom: var(--spacing-4);
      font-size: var(--text-sm);
    }
    .chart-container {
      background: hsl(var(--muted) / 0.2);
      border-radius: var(--radius-md);
      padding: var(--spacing-3);
      height: 120px;
    }
    .chart-title {
      font-size: var(--text-xs);
      color: hsl(var(--muted-foreground));
      margin-bottom: var(--spacing-2);
    }
    .talktime-card {
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius-lg);
    }
    .talktime-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--spacing-3) var(--spacing-4);
      border-bottom: 1px solid hsl(var(--border));
    }
    .talktime-content {
      padding: var(--spacing-4);
    }
    .avg-line {
      font-size: var(--text-sm);
      color: hsl(var(--muted-foreground));
      margin-bottom: var(--spacing-3);
    }
    .student-bar {
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
      margin-bottom: var(--spacing-2);
      font-size: var(--text-sm);
    }
    .student-name {
      width: 80px;
    }
    .bar-container {
      flex: 1;
      height: 16px;
      background: hsl(var(--muted));
      border-radius: var(--radius-sm);
      overflow: hidden;
    }
    .bar-fill {
      height: 100%;
      background: hsl(var(--brand-primary));
    }
    .bar-fill.high {
      background: hsl(var(--success));
    }
    .bar-fill.warning {
      background: hsl(var(--warning));
    }
    .bar-fill.danger {
      background: hsl(var(--destructive));
    }
    .time-value {
      width: 50px;
      text-align: right;
    }
    .status-badge {
      font-size: var(--text-xs);
      padding: var(--spacing-1) var(--spacing-2);
      border-radius: var(--radius-sm);
    }
    .status-badge.top {
      background: hsl(var(--success) / 0.1);
      color: hsl(var(--success));
    }
    .status-badge.warning {
      background: hsl(var(--warning) / 0.1);
      color: hsl(var(--warning));
    }
    .status-badge.danger {
      background: hsl(var(--destructive) / 0.1);
      color: hsl(var(--destructive));
    }
    .separator-line {
      border-top: 1px dashed hsl(var(--border));
      margin: var(--spacing-2) 0;
      position: relative;
    }
    .separator-line::after {
      content: "평균선";
      position: absolute;
      right: 0;
      top: -8px;
      font-size: var(--text-xs);
      color: hsl(var(--muted-foreground));
      background: hsl(var(--card));
      padding: 0 var(--spacing-1);
    }
    .no-participation-alert {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--spacing-2) var(--spacing-3);
      background: hsl(var(--destructive) / 0.1);
      border-radius: var(--radius-md);
      margin-top: var(--spacing-3);
    }
    .alert-info {
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
      color: hsl(var(--destructive));
      font-size: var(--text-sm);
    }
    .stat-card {
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius-lg);
      padding: var(--spacing-4);
    }
    .stat-header {
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
      font-weight: var(--font-semibold);
      margin-bottom: var(--spacing-3);
    }
    .progress-bar-lg {
      height: 20px;
      background: hsl(var(--muted));
      border-radius: var(--radius-sm);
      overflow: hidden;
      margin: var(--spacing-2) 0;
    }
    .progress-fill-lg {
      height: 100%;
      background: hsl(var(--success));
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-right: var(--spacing-2);
      color: white;
      font-size: var(--text-xs);
      font-weight: var(--font-semibold);
    }
    .quick-actions {
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius-lg);
      padding: var(--spacing-4);
    }
    .quick-actions-title {
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
      font-weight: var(--font-semibold);
      margin-bottom: var(--spacing-3);
    }
    .actions-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--spacing-2);
    }
    .action-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: var(--spacing-1);
      padding: var(--spacing-3);
      background: hsl(var(--muted) / 0.2);
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius-md);
      font-size: var(--text-xs);
      text-align: center;
      cursor: pointer;
      text-decoration: none;
      color: hsl(var(--foreground));
    }
    .action-btn:hover {
      background: hsl(var(--muted) / 0.4);
    }
  </style>
</head>
<body>
  <!-- Full View Mode - 전체 화면 -->
  <div class="full-view-container" id="fullViewContainer">
    <!-- Page Header -->
    <header class="page-header">
      <div class="header-title">
        <i data-lucide="bar-chart-2" class="icon-lg" style="color: hsl(var(--brand-primary))"></i>
        <h1>실시간 참여도 대시보드</h1>
        <div class="session-badge">
          <span class="dot"></span>
          세션 진행 중 45:23
        </div>
      </div>
      <div class="header-actions">
        <a href="../e3-live/live-005-professor-view.html?analytics=mini" class="btn btn-outline">
          <i data-lucide="minimize-2" class="icon-sm"></i>
          미니 뷰
        </a>
        <a href="../e3-live/live-005-professor-view.html" class="btn btn-primary">
          <i data-lucide="arrow-left" class="icon-sm"></i>
          세션으로 돌아가기
        </a>
      </div>
    </header>

    <!-- Content Grid -->
    <div class="content-grid">
      <!-- Overview Section -->
      <div class="overview-card full-width">
        <div class="flex items-center gap-2 mb-3">
          <i data-lucide="trending-up" class="icon-md" style="color: hsl(var(--brand-primary))"></i>
          <span class="font-semibold">전체 참여 현황</span>
        </div>
        <div class="overview-stats">
          <span>참여율: <strong>94%</strong></span>
          <span>평균 발언: <strong>2.3회/인</strong></span>
          <span>활성 참가자: <strong>45/48명</strong></span>
        </div>
        <div class="chart-container">
          <div class="chart-title">참여 트렌드 (최근 30분)</div>
          <div class="text-xs text-muted text-center" style="padding-top: 40px;">
            [참여율 트렌드 차트 - 80~95% 범위에서 변동]
          </div>
        </div>
      </div>

      <!-- TalkTime Section -->
      <div class="talktime-card full-width">
        <div class="talktime-header">
          <div class="flex items-center gap-2">
            <i data-lucide="mic" class="icon-md" style="color: hsl(var(--brand-primary))"></i>
            <span class="font-semibold">학생별 발언 시간 (TalkTime)</span>
          </div>
          <span class="text-sm text-muted">발언시간순 ▼</span>
        </div>
        <div class="talktime-content">
          <div class="avg-line">평균 발언 시간: 3분 24초</div>

          <!-- Above Average -->
          <div class="student-bar">
            <span class="student-name">이영희</span>
            <div class="bar-container">
              <div class="bar-fill high" style="width: 87%;"></div>
            </div>
            <span class="time-value">8:45</span>
            <span class="status-badge top">상위</span>
          </div>
          <div class="student-bar">
            <span class="student-name">김철수</span>
            <div class="bar-container">
              <div class="bar-fill high" style="width: 72%;"></div>
            </div>
            <span class="time-value">7:12</span>
            <span class="status-badge top">상위</span>
          </div>
          <div class="student-bar">
            <span class="student-name">박민수</span>
            <div class="bar-container">
              <div class="bar-fill" style="width: 55%;"></div>
            </div>
            <span class="time-value">5:30</span>
          </div>
          <div class="student-bar">
            <span class="student-name">정수진</span>
            <div class="bar-container">
              <div class="bar-fill" style="width: 42%;"></div>
            </div>
            <span class="time-value">4:15</span>
          </div>
          <div class="student-bar">
            <span class="student-name">최현우</span>
            <div class="bar-container">
              <div class="bar-fill" style="width: 40%;"></div>
            </div>
            <span class="time-value">3:58</span>
          </div>

          <div class="separator-line"></div>

          <!-- Below Average -->
          <div class="student-bar">
            <span class="student-name">강동원</span>
            <div class="bar-container">
              <div class="bar-fill" style="width: 28%;"></div>
            </div>
            <span class="time-value">2:45</span>
          </div>
          <div class="student-bar">
            <span class="student-name">한지민</span>
            <div class="bar-container">
              <div class="bar-fill" style="width: 25%;"></div>
            </div>
            <span class="time-value">2:30</span>
          </div>
          <div class="student-bar">
            <span class="student-name">윤서연</span>
            <div class="bar-container">
              <div class="bar-fill warning" style="width: 18%;"></div>
            </div>
            <span class="time-value">1:52</span>
          </div>
          <div class="student-bar">
            <span class="student-name">조민준</span>
            <div class="bar-container">
              <div class="bar-fill warning" style="width: 14%;"></div>
            </div>
            <span class="time-value">1:25</span>
            <span class="status-badge warning">주의</span>
          </div>
          <div class="student-bar">
            <span class="student-name">임수빈</span>
            <div class="bar-container">
              <div class="bar-fill danger" style="width: 8%;"></div>
            </div>
            <span class="time-value">0:48</span>
            <span class="status-badge danger">경고</span>
          </div>
          <div class="student-bar">
            <span class="student-name">송하늘</span>
            <div class="bar-container">
              <div class="bar-fill danger" style="width: 5%;"></div>
            </div>
            <span class="time-value">0:32</span>
            <span class="status-badge danger">경고</span>
          </div>
          <div class="student-bar">
            <span class="student-name">권태희</span>
            <div class="bar-container">
              <div class="bar-fill danger" style="width: 1%;"></div>
            </div>
            <span class="time-value">0:12</span>
            <span class="status-badge danger">경고</span>
          </div>

          <!-- No Participation Alert -->
          <div class="no-participation-alert">
            <div class="alert-info">
              <i data-lucide="alert-circle" class="icon-sm"></i>
              <span><strong>30분+ 무참여 학생 (3명):</strong> 권태희, 오지훈, 백승민</span>
            </div>
            <a href="alert-001-dashboard.html" class="btn btn-outline btn-sm">
              지목하기
              <i data-lucide="chevron-right" class="icon-xs"></i>
            </a>
          </div>
        </div>
      </div>

      <!-- Poll/Quiz Participation -->
      <div class="stat-card">
        <div class="stat-header">
          <i data-lucide="bar-chart-3" class="icon-sm" style="color: hsl(var(--brand-primary))"></i>
          투표/퀴즈 참여
        </div>
        <div class="text-sm">현재 투표: 진행 중 (45/48)</div>
        <div class="text-xs text-muted">응답률 실시간</div>
        <div class="progress-bar-lg">
          <div class="progress-fill-lg" style="width: 94%;">94%</div>
        </div>
        <div class="text-xs text-muted">미응답: 권태희, 오지훈, 백승민</div>
      </div>

      <!-- Chat Activity -->
      <div class="stat-card">
        <div class="stat-header">
          <i data-lucide="message-square" class="icon-sm" style="color: hsl(var(--brand-primary))"></i>
          채팅 활성도
        </div>
        <div class="text-sm mb-2">총 메시지: <strong>127건</strong></div>
        <div class="text-xs text-muted mb-1">질문: 23건 | 답변: 45건</div>
        <div class="text-sm mt-2">활발한 참여자:</div>
        <div class="text-xs text-muted">이영희(32), 김철수(28), 박민수(18)</div>
        <div class="text-xs mt-2" style="color: hsl(var(--warning));">채팅 없음: 5명</div>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions full-width">
        <div class="quick-actions-title">
          <i data-lucide="zap" class="icon-md" style="color: hsl(var(--brand-primary))"></i>
          빠른 작업
        </div>
        <div class="actions-grid">
          <a href="../e3-live/live-005-professor-view.html" class="action-btn">
            <i data-lucide="bell" class="icon-md"></i>
            전체 알림<br>보내기
          </a>
          <a href="alert-001-dashboard.html" class="action-btn">
            <i data-lucide="user-x" class="icon-md"></i>
            무참여 지목<br>(3명)
          </a>
          <a href="../e3-live/live-005-professor-view.html" class="action-btn">
            <i data-lucide="heart" class="icon-md"></i>
            칭찬 메시지<br>(상위자)
          </a>
          <a href="../e4-active/poll-001-create-poll.html" class="action-btn">
            <i data-lucide="vote" class="icon-md"></i>
            참여 독려<br>투표 시작
          </a>
        </div>
      </div>
    </div>
  </div>

  <script>
    lucide.createIcons();
  </script>
</body>
</html>
