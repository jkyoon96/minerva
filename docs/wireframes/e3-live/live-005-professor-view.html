<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LIVE-005: ë¼ì´ë¸Œ ì„¸ì…˜ - êµìˆ˜ì í™”ë©´ - EduForum</title>
  <link rel="stylesheet" href="../css/variables.css">
  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/components.css">
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <style>
    body {
      background: hsl(var(--background));
    }
    .live-header {
      background: hsl(var(--card));
      border-bottom: 1px solid hsl(var(--border));
      padding: var(--spacing-2) var(--spacing-4);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .live-badge {
      background: hsl(var(--destructive));
      color: white;
      padding: var(--spacing-1) var(--spacing-2);
      border-radius: var(--radius-sm);
      font-size: var(--text-xs);
      font-weight: var(--font-semibold);
      display: flex;
      align-items: center;
      gap: var(--spacing-1);
    }
    .live-badge::before {
      content: '';
      width: 8px;
      height: 8px;
      background: white;
      border-radius: 50%;
      animation: blink 1s infinite;
    }
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    .main-container {
      display: flex;
      height: calc(100vh - 57px);
    }
    .video-area {
      flex: 1;
      padding: var(--spacing-4);
      display: flex;
      flex-direction: column;
    }
    .main-video {
      flex: 1;
      background: hsl(var(--muted));
      border-radius: var(--radius-lg);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: var(--spacing-4);
      position: relative;
    }
    .speaker-info {
      position: absolute;
      bottom: var(--spacing-3);
      left: var(--spacing-3);
      background: rgba(0, 0, 0, 0.6);
      color: white;
      padding: var(--spacing-1) var(--spacing-2);
      border-radius: var(--radius-sm);
      font-size: var(--text-sm);
      display: flex;
      align-items: center;
      gap: var(--spacing-1);
    }
    .participant-strip {
      display: flex;
      gap: var(--spacing-2);
      overflow-x: auto;
      padding-bottom: var(--spacing-2);
    }
    .participant-tile {
      width: 120px;
      flex-shrink: 0;
      background: hsl(var(--muted));
      border-radius: var(--radius-md);
      aspect-ratio: 4/3;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    .participant-tile .name {
      font-size: var(--text-xs);
      margin-top: var(--spacing-1);
    }
    .participant-tile .status {
      position: absolute;
      bottom: var(--spacing-1);
      display: flex;
      gap: var(--spacing-1);
    }
    .hand-raised {
      position: absolute;
      top: var(--spacing-1);
      right: var(--spacing-1);
      color: hsl(var(--warning));
    }
    .controls-bar {
      background: hsl(var(--card));
      border-top: 1px solid hsl(var(--border));
      padding: var(--spacing-3);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--spacing-2);
    }
    .control-btn {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      border: none;
      cursor: pointer;
      transition: all 0.2s;
    }
    .control-btn.active {
      background: hsl(var(--brand-primary));
      color: white;
    }
    .control-btn.inactive {
      background: hsl(var(--muted));
      color: hsl(var(--muted-foreground));
    }
    .control-btn.danger {
      background: hsl(var(--destructive));
      color: white;
    }
    .control-divider {
      width: 1px;
      height: 32px;
      background: hsl(var(--border));
      margin: 0 var(--spacing-2);
    }
    .side-panel {
      width: 280px;
      background: hsl(var(--card));
      border-left: 1px solid hsl(var(--border));
      display: flex;
      flex-direction: column;
    }
    .panel-tabs {
      display: flex;
      border-bottom: 1px solid hsl(var(--border));
    }
    .panel-tab {
      flex: 1;
      padding: var(--spacing-3);
      text-align: center;
      font-size: var(--text-sm);
      cursor: pointer;
      border-bottom: 2px solid transparent;
    }
    .panel-tab.active {
      border-bottom-color: hsl(var(--brand-primary));
      color: hsl(var(--brand-primary));
    }
    .panel-content {
      flex: 1;
      overflow-y: auto;
      padding: var(--spacing-3);
    }
    .hand-queue-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--spacing-2);
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius-md);
      margin-bottom: var(--spacing-2);
    }
    .participant-list-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--spacing-2);
      border-radius: var(--radius-md);
      margin-bottom: var(--spacing-1);
    }
    .participant-list-item:hover {
      background: hsl(var(--muted) / 0.5);
    }

    /* Mini Analytics Popup */
    .analytics-popup {
      position: fixed;
      bottom: var(--spacing-4);
      right: var(--spacing-4);
      width: 380px;
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius-lg);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      z-index: 1000;
      display: none;
      flex-direction: column;
      max-height: 480px;
    }
    .analytics-popup.show {
      display: flex;
    }
    .popup-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--spacing-2) var(--spacing-3);
      background: hsl(var(--muted) / 0.3);
      border-bottom: 1px solid hsl(var(--border));
      flex-shrink: 0;
    }
    .popup-header .header-title {
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
    }
    .popup-header .header-actions {
      display: flex;
      align-items: center;
      gap: var(--spacing-1);
    }
    .view-toggle {
      display: flex;
      gap: var(--spacing-1);
    }
    .view-btn {
      padding: var(--spacing-1) var(--spacing-2);
      border: 1px solid hsl(var(--border));
      background: hsl(var(--card));
      border-radius: var(--radius-sm);
      font-size: var(--text-xs);
      cursor: pointer;
      text-decoration: none;
      color: hsl(var(--foreground));
    }
    .view-btn:hover {
      background: hsl(var(--muted));
    }
    .view-btn.active {
      background: hsl(var(--brand-primary));
      color: white;
      border-color: hsl(var(--brand-primary));
    }
    .close-btn {
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: none;
      background: transparent;
      border-radius: var(--radius-sm);
      cursor: pointer;
      color: hsl(var(--muted-foreground));
    }
    .close-btn:hover {
      background: hsl(var(--destructive) / 0.1);
      color: hsl(var(--destructive));
    }
    .session-time {
      font-size: var(--text-xs);
      color: hsl(var(--muted-foreground));
      margin-left: var(--spacing-2);
    }
    .popup-content {
      flex: 1;
      overflow-y: auto;
      padding: var(--spacing-3);
    }
    .mini-overview-card {
      background: hsl(var(--muted) / 0.2);
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius-lg);
      padding: var(--spacing-3);
      margin-bottom: var(--spacing-3);
    }
    .mini-stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--spacing-2);
      margin-bottom: var(--spacing-3);
    }
    .mini-stat-item {
      text-align: center;
      padding: var(--spacing-2);
      background: hsl(var(--card));
      border-radius: var(--radius-md);
    }
    .mini-stat-value {
      font-size: var(--text-lg);
      font-weight: var(--font-bold);
      color: hsl(var(--brand-primary));
    }
    .mini-stat-label {
      font-size: var(--text-xs);
      color: hsl(var(--muted-foreground));
    }
    .mini-chart {
      background: hsl(var(--card));
      border-radius: var(--radius-md);
      padding: var(--spacing-2);
      height: 80px;
    }
    .mini-talktime-card {
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius-lg);
    }
    .mini-talktime-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--spacing-2) var(--spacing-3);
      border-bottom: 1px solid hsl(var(--border));
    }
    .mini-talktime-content {
      padding: var(--spacing-2) var(--spacing-3);
    }
    .student-bar {
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
      margin-bottom: var(--spacing-1);
      font-size: var(--text-xs);
    }
    .student-name {
      width: 55px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .bar-container {
      flex: 1;
      height: 10px;
      background: hsl(var(--muted));
      border-radius: var(--radius-sm);
      overflow: hidden;
    }
    .bar-fill {
      height: 100%;
      background: hsl(var(--brand-primary));
    }
    .bar-fill.high { background: hsl(var(--success)); }
    .bar-fill.warning { background: hsl(var(--warning)); }
    .bar-fill.danger { background: hsl(var(--destructive)); }
    .time-value {
      width: 35px;
      text-align: right;
      font-size: var(--text-xs);
    }
    .mini-alert {
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
      padding: var(--spacing-2);
      background: hsl(var(--destructive) / 0.1);
      border-radius: var(--radius-md);
      margin-top: var(--spacing-2);
      font-size: var(--text-xs);
      color: hsl(var(--destructive));
    }

    /* Screen Share Popup */
    .screen-share-popup {
      position: fixed;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      width: 340px;
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius-lg);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      z-index: 1000;
      display: none;
      flex-direction: column;
    }
    .screen-share-popup.show {
      display: flex;
    }
    .screen-options-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--spacing-2);
    }
    .screen-option {
      border: 2px solid hsl(var(--border));
      border-radius: var(--radius-md);
      padding: var(--spacing-2);
      cursor: pointer;
      text-align: center;
      transition: all 0.2s;
    }
    .screen-option:hover {
      border-color: hsl(var(--brand-primary) / 0.5);
    }
    .screen-option.selected {
      border-color: hsl(var(--brand-primary));
      background: hsl(var(--brand-primary) / 0.05);
    }
    .screen-preview {
      background: hsl(var(--muted));
      border-radius: var(--radius-sm);
      aspect-ratio: 16/9;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: var(--spacing-1);
    }

    /* Chat Tab Styles */
    .system-message {
      background: hsl(var(--muted) / 0.5);
      padding: var(--spacing-2);
      border-radius: var(--radius-md);
      font-size: var(--text-xs);
      text-align: center;
      color: hsl(var(--muted-foreground));
      margin-bottom: var(--spacing-3);
    }
    .chat-message {
      margin-bottom: var(--spacing-3);
    }
    .chat-header {
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
      margin-bottom: var(--spacing-1);
    }
    .chat-sender {
      font-size: var(--text-sm);
      font-weight: var(--font-medium);
    }
    .chat-sender.professor {
      color: hsl(var(--brand-primary));
    }
    .chat-time {
      font-size: var(--text-xs);
      color: hsl(var(--muted-foreground));
    }
    .chat-bubble {
      background: hsl(var(--muted));
      padding: var(--spacing-2) var(--spacing-3);
      border-radius: var(--radius-md);
      font-size: var(--text-sm);
      display: inline-block;
      max-width: 90%;
    }
    .file-bubble {
      background: hsl(var(--muted));
      padding: var(--spacing-3);
      border-radius: var(--radius-md);
    }
    .file-card {
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius-md);
      padding: var(--spacing-2);
    }
    .chat-input-area {
      padding: var(--spacing-2);
      border-top: 1px solid hsl(var(--border));
    }
    .chat-input-actions {
      display: flex;
      gap: var(--spacing-1);
      margin-top: var(--spacing-2);
    }

    /* DM Popup */
    .dm-popup {
      position: fixed;
      bottom: var(--spacing-4);
      right: 300px;
      width: 300px;
      height: 400px;
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius-lg);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      z-index: 1001;
      display: none;
      flex-direction: column;
    }
    .dm-popup.show {
      display: flex;
    }
    .dm-messages {
      flex: 1;
      overflow-y: auto;
      padding: var(--spacing-3);
    }
    .dm-message {
      margin-bottom: var(--spacing-2);
    }
    .dm-bubble {
      background: hsl(var(--muted));
      padding: var(--spacing-2) var(--spacing-3);
      border-radius: var(--radius-md);
      font-size: var(--text-sm);
      display: inline-block;
      max-width: 85%;
    }
    .dm-message.mine {
      text-align: right;
    }
    .dm-message.mine .dm-bubble {
      background: hsl(var(--brand-primary));
      color: white;
    }

    /* File Share Popup */
    .file-share-popup {
      position: fixed;
      bottom: 80px;
      right: 300px;
      width: 280px;
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius-lg);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      z-index: 1001;
      display: none;
      flex-direction: column;
    }
    .file-share-popup.show {
      display: flex;
    }
    .file-drop-zone {
      border: 2px dashed hsl(var(--border));
      border-radius: var(--radius-md);
      padding: var(--spacing-6);
      text-align: center;
      margin-bottom: var(--spacing-3);
    }

    /* Reaction Popup */
    .reaction-popup {
      position: fixed;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      width: 380px;
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius-lg);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      z-index: 1000;
      display: none;
      flex-direction: column;
      padding: var(--spacing-4);
    }
    .reaction-popup.show {
      display: flex;
    }
    .reaction-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: var(--spacing-2);
    }
    .reaction-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: var(--spacing-2);
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all 0.2s;
      background: transparent;
    }
    .reaction-btn:hover {
      background: hsl(var(--muted) / 0.5);
      transform: scale(1.05);
    }
    .reaction-btn:active {
      transform: scale(0.95);
    }
    .reaction-emoji {
      font-size: 1.5rem;
      margin-bottom: var(--spacing-1);
    }
    .reaction-label {
      font-size: var(--text-xs);
      color: hsl(var(--muted-foreground));
    }

    /* Floating Reactions */
    .floating-reaction {
      position: absolute;
      font-size: 2.5rem;
      animation: float-up 3s ease-out forwards;
      pointer-events: none;
      z-index: 100;
    }
    @keyframes float-up {
      0% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
      50% {
        opacity: 1;
        transform: translateY(-80px) scale(1.3);
      }
      100% {
        opacity: 0;
        transform: translateY(-150px) scale(0.8);
      }
    }

    .layout-dropdown {
      position: relative;
    }
    /* Layout Dropdown Popup */
    .layout-popup {
      position: absolute;
      top: 100%;
      right: 0;
      margin-top: var(--spacing-1);
      width: 260px;
      background: hsl(var(--card));
      border: 1px solid hsl(var(--border));
      border-radius: var(--radius-lg);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
      z-index: 1000;
      display: none;
      flex-direction: column;
    }
    .layout-popup.show {
      display: flex;
    }
    .layout-option {
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
      padding: var(--spacing-2);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: background 0.2s;
      text-decoration: none;
      color: inherit;
    }
    .layout-option:hover {
      background: hsl(var(--muted) / 0.5);
    }
    .layout-option.selected {
      background: hsl(var(--brand-primary) / 0.1);
    }
    .layout-icon {
      width: 32px;
      height: 32px;
      background: hsl(var(--muted));
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }
    .layout-info {
      flex: 1;
    }
    .layout-name {
      font-weight: var(--font-medium);
      margin-bottom: var(--spacing-1);
    }
    .layout-desc {
      font-size: var(--text-xs);
      color: hsl(var(--muted-foreground));
    }
    .layout-check {
      color: hsl(var(--brand-primary));
    }
    .professor-section {
      padding: var(--spacing-3);
      border-top: 1px solid hsl(var(--border));
      background: hsl(var(--muted) / 0.3);
    }
    .professor-title {
      font-size: var(--text-xs);
      color: hsl(var(--muted-foreground));
      margin-bottom: var(--spacing-2);
    }
    .lock-option {
      display: flex;
      align-items: center;
      gap: var(--spacing-3);
      padding: var(--spacing-2);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: background 0.2s;
    }
    .lock-option:hover {
      background: hsl(var(--muted) / 0.5);
    }

    /* Connection Quality Indicator */
    .connection-indicator {
      display: flex;
      align-items: center;
      gap: var(--spacing-1);
      padding: var(--spacing-1) var(--spacing-2);
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: background 0.2s;
    }
    .connection-indicator:hover {
      background: hsl(var(--muted) / 0.5);
    }
    .signal-bars {
      display: flex;
      align-items: flex-end;
      gap: 2px;
      height: 16px;
    }
    .signal-bar {
      width: 3px;
      border-radius: 1px;
    }
    .signal-bar.active {
      background: currentColor;
    }
    .signal-bar.inactive {
      background: hsl(var(--muted-foreground) / 0.3);
    }
    .connection-good { color: hsl(var(--success)); }
    .connection-fair { color: hsl(var(--warning)); }
    .connection-poor { color: hsl(var(--destructive)); }

    .tile-signal {
      position: absolute;
      top: var(--spacing-1);
      left: var(--spacing-1);
      display: flex;
      align-items: flex-end;
      gap: 1px;
      height: 12px;
    }
    .tile-signal .signal-bar {
      width: 2px;
      border-radius: 1px;
    }

    /* Network Warning Modal */
    .network-warning-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }
    .network-warning-modal.show {
      display: flex;
    }
    .network-warning-content {
      background: hsl(var(--card));
      border-radius: var(--radius-lg);
      width: 400px;
      max-width: 90%;
    }
    .network-warning-header {
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
      padding: var(--spacing-4);
      border-bottom: 1px solid hsl(var(--border));
    }
    .network-warning-body {
      padding: var(--spacing-4);
    }
    .network-warning-footer {
      padding: var(--spacing-3) var(--spacing-4);
      border-top: 1px solid hsl(var(--border));
      display: flex;
      gap: var(--spacing-2);
      justify-content: flex-end;
    }
  </style>
</head>
<body>
  <!-- Live Header -->
  <header class="live-header">
    <div class="flex items-center gap-4">
      <span class="live-badge">LIVE</span>
      <span class="font-medium">ê²½ì˜í•™ê°œë¡  #12</span>
      <span class="text-muted">45:23</span>
      <span class="flex items-center gap-1 text-sm text-muted">
        <i data-lucide="users" class="icon-sm"></i>
        26ëª…
      </span>
    </div>
    <div class="flex items-center gap-2">
      <!-- Connection Quality Indicator -->
      <a href="live-020-connection-quality.html" class="connection-indicator connection-good" title="ì—°ê²° í’ˆì§ˆ: ìš°ìˆ˜">
        <div class="signal-bars">
          <div class="signal-bar active" style="height: 4px;"></div>
          <div class="signal-bar active" style="height: 8px;"></div>
          <div class="signal-bar active" style="height: 12px;"></div>
          <div class="signal-bar active" style="height: 16px;"></div>
        </div>
        <span class="text-xs">ìš°ìˆ˜</span>
      </a>
      <div class="layout-dropdown">
        <button class="btn btn-outline btn-sm" onclick="openLayoutPopup()">
          <i data-lucide="user" class="icon-sm"></i>
          ë°œí‘œì
          <i data-lucide="chevron-down" class="icon-xs ml-1"></i>
        </button>
        <!-- Layout Popup -->
        <div class="layout-popup" id="layoutPopup">
          <div class="popup-header">
            <div class="header-title">
              <i data-lucide="layout-grid" class="icon-sm" style="color: hsl(var(--brand-primary))"></i>
              <span class="font-semibold text-sm">ë ˆì´ì•„ì›ƒ ì„ íƒ</span>
            </div>
            <button class="close-btn" onclick="closeLayoutPopup()" title="ë‹«ê¸°">
              <i data-lucide="x" class="icon-sm"></i>
            </button>
          </div>
          <div class="popup-content">
            <a href="live-017-grid-view.html" class="layout-option">
              <div class="layout-icon">
                <i data-lucide="layout-grid" class="icon-sm text-muted"></i>
              </div>
              <div class="layout-info">
                <div class="layout-name">ê·¸ë¦¬ë“œ ë·°</div>
                <div class="layout-desc">ëª¨ë“  ì°¸ê°€ìë¥¼ ê· ë“±í•˜ê²Œ í‘œì‹œ</div>
              </div>
            </a>
            <div class="layout-option selected">
              <div class="layout-icon">
                <i data-lucide="user" class="icon-sm text-muted"></i>
              </div>
              <div class="layout-info">
                <div class="layout-name">ë°œí‘œì ë·°</div>
                <div class="layout-desc">ë°œí‘œì í¬ê²Œ, ë‚˜ë¨¸ì§€ ì‘ê²Œ</div>
              </div>
              <i data-lucide="check" class="icon-sm layout-check"></i>
            </div>
            <div class="layout-option">
              <div class="layout-icon">
                <i data-lucide="focus" class="icon-sm text-muted"></i>
              </div>
              <div class="layout-info">
                <div class="layout-name">ìŠ¤í¬íŠ¸ë¼ì´íŠ¸</div>
                <div class="layout-desc">íŠ¹ì • ì°¸ê°€ìë§Œ ê°•ì¡°</div>
              </div>
            </div>
          </div>
          <!-- Professor Only Section -->
          <div class="professor-section">
            <div class="professor-title">êµìˆ˜ ì „ìš© (ì „ì²´ ê°•ì œ ì ìš©)</div>
            <div class="lock-option">
              <div class="layout-icon">
                <i data-lucide="lock" class="icon-sm text-muted"></i>
              </div>
              <div class="layout-info">
                <div class="layout-name">ì „ì²´ ë ˆì´ì•„ì›ƒ ê³ ì •</div>
                <div class="layout-desc">ëª¨ë“  ì°¸ê°€ìì—ê²Œ ë™ì¼ ë ˆì´ì•„ì›ƒ ì ìš©</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <button class="btn btn-ghost btn-icon" title="ì„¤ì •">
        <i data-lucide="settings" class="icon-md"></i>
      </button>
      <button class="btn btn-destructive btn-sm" onclick="location.href='live-022-end-session.html'">ì„¸ì…˜ ì¢…ë£Œ</button>
    </div>
  </header>

  <div class="main-container">
    <!-- Video Area -->
    <div class="video-area">
      <!-- Main Video -->
      <div class="main-video" id="mainVideo">
        <div class="text-center">
          <div class="avatar avatar-xl mb-2">
            <i data-lucide="user" class="icon-xl"></i>
          </div>
          <div class="font-medium">ê¹€ì² ìˆ˜ êµìˆ˜</div>
          <div class="text-sm text-muted">(ë°œí‘œ ì¤‘)</div>
        </div>
        <div class="speaker-info">
          <i data-lucide="mic" class="icon-xs"></i>
          <span>ê¹€ì² ìˆ˜ êµìˆ˜</span>
        </div>
      </div>

      <!-- Participant Strip -->
      <div class="participant-strip">
        <div class="participant-tile">
          <!-- Connection Quality: Good -->
          <div class="tile-signal" style="color: hsl(var(--success));" title="ì—°ê²°: ìš°ìˆ˜">
            <div class="signal-bar active" style="height: 3px;"></div>
            <div class="signal-bar active" style="height: 6px;"></div>
            <div class="signal-bar active" style="height: 9px;"></div>
            <div class="signal-bar active" style="height: 12px;"></div>
          </div>
          <div class="avatar avatar-sm">
            <i data-lucide="user" class="icon-sm"></i>
          </div>
          <div class="name">ì´ë¯¼ì¤€</div>
          <div class="hand-raised">
            <i data-lucide="hand" class="icon-sm"></i>
          </div>
          <div class="status">
            <i data-lucide="mic" class="icon-xs" style="color: hsl(var(--success))"></i>
            <i data-lucide="video" class="icon-xs" style="color: hsl(var(--success))"></i>
          </div>
        </div>
        <div class="participant-tile">
          <!-- Connection Quality: Good -->
          <div class="tile-signal" style="color: hsl(var(--success));" title="ì—°ê²°: ìš°ìˆ˜">
            <div class="signal-bar active" style="height: 3px;"></div>
            <div class="signal-bar active" style="height: 6px;"></div>
            <div class="signal-bar active" style="height: 9px;"></div>
            <div class="signal-bar active" style="height: 12px;"></div>
          </div>
          <div class="avatar avatar-sm">
            <i data-lucide="user" class="icon-sm"></i>
          </div>
          <div class="name">ë°•ì„œì—°</div>
          <div class="hand-raised">
            <i data-lucide="hand" class="icon-sm"></i>
          </div>
          <div class="status">
            <i data-lucide="mic" class="icon-xs" style="color: hsl(var(--success))"></i>
            <i data-lucide="video" class="icon-xs" style="color: hsl(var(--success))"></i>
          </div>
        </div>
        <div class="participant-tile">
          <!-- Connection Quality: Fair -->
          <div class="tile-signal" style="color: hsl(var(--warning));" title="ì—°ê²°: ë³´í†µ">
            <div class="signal-bar active" style="height: 3px;"></div>
            <div class="signal-bar active" style="height: 6px;"></div>
            <div class="signal-bar inactive" style="height: 9px;"></div>
            <div class="signal-bar inactive" style="height: 12px;"></div>
          </div>
          <div class="avatar avatar-sm">
            <i data-lucide="user" class="icon-sm"></i>
          </div>
          <div class="name">ì •ë„ìœ¤</div>
          <div class="status">
            <i data-lucide="mic-off" class="icon-xs text-muted"></i>
            <i data-lucide="video" class="icon-xs" style="color: hsl(var(--success))"></i>
          </div>
        </div>
        <div class="participant-tile" onclick="openNetworkWarningModal()" style="cursor: pointer;">
          <!-- Connection Quality: Poor -->
          <div class="tile-signal" style="color: hsl(var(--destructive));" title="ì—°ê²°: ë¶ˆëŸ‰ - í´ë¦­í•˜ì—¬ ìƒì„¸ ë³´ê¸°">
            <div class="signal-bar active" style="height: 3px;"></div>
            <div class="signal-bar inactive" style="height: 6px;"></div>
            <div class="signal-bar inactive" style="height: 9px;"></div>
            <div class="signal-bar inactive" style="height: 12px;"></div>
          </div>
          <div class="avatar avatar-sm">
            <i data-lucide="user" class="icon-sm"></i>
          </div>
          <div class="name">ê°•ìˆ˜ì•„</div>
          <div class="status">
            <i data-lucide="mic-off" class="icon-xs text-muted"></i>
            <i data-lucide="video-off" class="icon-xs text-muted"></i>
          </div>
        </div>
        <div class="participant-tile" style="background: hsl(var(--muted) / 0.5);">
          <div class="text-muted text-sm">+22ëª…</div>
        </div>
      </div>

      <!-- Controls Bar -->
      <div class="controls-bar">
        <button class="control-btn active" title="ë§ˆì´í¬ ON">
          <i data-lucide="mic" class="icon-md"></i>
        </button>
        <button class="control-btn active" title="ì¹´ë©”ë¼ ON">
          <i data-lucide="video" class="icon-md"></i>
        </button>
        <button class="control-btn inactive" title="í™”ë©´ ê³µìœ " onclick="openScreenSharePopup()">
          <i data-lucide="monitor" class="icon-md"></i>
        </button>
        <button class="control-btn active" title="ë…¹í™” ì¤‘">
          <i data-lucide="circle" class="icon-md"></i>
        </button>

        <div class="control-divider"></div>

        <a href="../e4-active/poll-001-create-poll.html" class="control-btn inactive" title="íˆ¬í‘œ">
          <i data-lucide="bar-chart-2" class="icon-md"></i>
        </a>
        <a href="../e4-active/quiz-001-question-bank.html" class="control-btn inactive" title="í€´ì¦ˆ">
          <i data-lucide="help-circle" class="icon-md"></i>
        </a>
        <button class="control-btn inactive" title="ë¶„ë°˜" onclick="openBreakoutPopup()">
          <i data-lucide="users" class="icon-md"></i>
        </button>
        <button class="control-btn inactive" title="ì†ë“¤ê¸°">
          <i data-lucide="hand" class="icon-md"></i>
        </button>
        <button class="control-btn inactive" title="ì´ëª¨ì§€" onclick="openReactionPopup()">
          <i data-lucide="smile" class="icon-md"></i>
        </button>
        <button class="control-btn inactive" title="ì‹¤ì‹œê°„ ì°¸ì—¬ë„" onclick="openAnalyticsPopup()">
          <i data-lucide="bar-chart-3" class="icon-md"></i>
        </button>

        <div class="control-divider"></div>

        <a href="live-022-end-session.html" class="control-btn danger" title="ì¢…ë£Œ">
          <i data-lucide="phone-off" class="icon-md"></i>
        </a>
      </div>
    </div>

    <!-- Side Panel -->
    <div class="side-panel">
      <div class="panel-tabs">
        <div class="panel-tab active" onclick="showTab('participants')">ì°¸ì—¬ì</div>
        <div class="panel-tab" onclick="showTab('chat')">ì±„íŒ…</div>
      </div>
      <!-- Participants Tab -->
      <div class="panel-content" id="participantsTab">
        <!-- Hand Raise Queue -->
        <div class="mb-4">
          <div class="text-sm font-semibold mb-2 flex items-center gap-2">
            <i data-lucide="hand" class="icon-sm" style="color: hsl(var(--warning))"></i>
            ì†ë“¤ê¸° (2)
          </div>
          <div class="hand-queue-item">
            <div class="flex items-center gap-2">
              <div class="avatar avatar-sm">
                <i data-lucide="user" class="icon-sm"></i>
              </div>
              <div>
                <div class="text-sm font-medium">ì´ë¯¼ì¤€</div>
                <div class="text-xs text-muted">2ë¶„ ì „</div>
              </div>
            </div>
          </div>
          <div class="hand-queue-item">
            <div class="flex items-center gap-2">
              <div class="avatar avatar-sm">
                <i data-lucide="user" class="icon-sm"></i>
              </div>
              <div>
                <div class="text-sm font-medium">ë°•ì„œì—°</div>
                <div class="text-xs text-muted">1ë¶„ ì „</div>
              </div>
            </div>
          </div>
        </div>

        <div class="separator my-3"></div>

        <!-- Waiting Room -->
        <div class="mb-3">
          <a href="live-004-waiting-manage.html" class="btn btn-outline btn-sm w-full flex items-center justify-center gap-2">
            <i data-lucide="clock" class="icon-sm"></i>
            ëŒ€ê¸°ì‹¤ ê´€ë¦¬
            <span class="badge badge-warning" style="margin-left: auto;">3</span>
          </a>
        </div>

        <!-- All Participants -->
        <div class="text-sm font-semibold mb-2">ì „ì²´ (26)</div>
        <div class="input-group mb-3">
          <span class="input-icon">
            <i data-lucide="search" class="icon-sm"></i>
          </span>
          <input type="text" class="input input-sm" style="padding-left: 2rem" placeholder="ê²€ìƒ‰">
        </div>

        <div class="participant-list-item">
          <div class="flex items-center gap-2">
            <div class="avatar avatar-sm">
              <i data-lucide="user" class="icon-sm"></i>
            </div>
            <div>
              <div class="text-sm font-medium">ê¹€ì² ìˆ˜</div>
              <div class="text-xs text-muted">êµìˆ˜</div>
            </div>
          </div>
          <div class="flex gap-1">
            <i data-lucide="mic" class="icon-sm" style="color: hsl(var(--success))"></i>
            <i data-lucide="video" class="icon-sm" style="color: hsl(var(--success))"></i>
          </div>
        </div>
        <div class="participant-list-item">
          <div class="flex items-center gap-2">
            <div class="avatar avatar-sm">
              <i data-lucide="user" class="icon-sm"></i>
            </div>
            <div class="text-sm font-medium">ì´ë¯¼ì¤€</div>
          </div>
          <div class="flex gap-1">
            <button class="btn btn-ghost btn-icon btn-sm" onclick="openDmPopup('ì´ë¯¼ì¤€')" title="1:1 ë©”ì‹œì§€">
              <i data-lucide="message-circle" class="icon-xs"></i>
            </button>
            <i data-lucide="mic" class="icon-sm" style="color: hsl(var(--success))"></i>
            <i data-lucide="video" class="icon-sm" style="color: hsl(var(--success))"></i>
          </div>
        </div>
        <div class="participant-list-item">
          <div class="flex items-center gap-2">
            <div class="avatar avatar-sm">
              <i data-lucide="user" class="icon-sm"></i>
            </div>
            <div class="text-sm font-medium">ë°•ì„œì—°</div>
          </div>
          <div class="flex gap-1">
            <button class="btn btn-ghost btn-icon btn-sm" onclick="openDmPopup('ë°•ì„œì—°')" title="1:1 ë©”ì‹œì§€">
              <i data-lucide="message-circle" class="icon-xs"></i>
            </button>
            <i data-lucide="mic" class="icon-sm" style="color: hsl(var(--success))"></i>
            <i data-lucide="video" class="icon-sm" style="color: hsl(var(--success))"></i>
          </div>
        </div>
      </div>

      <!-- Chat Tab -->
      <div class="panel-content" id="chatTab" style="display: none;">
        <div class="chat-messages" style="flex: 1; overflow-y: auto;">
          <!-- System Message -->
          <div class="system-message">
            ì„¸ì…˜ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤
          </div>

          <!-- Professor Message -->
          <div class="chat-message">
            <div class="chat-header">
              <span class="chat-sender professor">ê¹€ì² ìˆ˜ (êµìˆ˜)</span>
              <span class="chat-time">10:05</span>
            </div>
            <div class="chat-bubble">
              ì˜¤ëŠ˜ì€ ë§ˆì¼€íŒ… ë¯¹ìŠ¤ 4Pì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.
            </div>
          </div>

          <!-- Student Message -->
          <div class="chat-message">
            <div class="chat-header">
              <span class="chat-sender" onclick="openDmPopup('ë°•ì„œì—°')" style="cursor: pointer;">ë°•ì„œì—°</span>
              <span class="chat-time">10:08</span>
            </div>
            <div class="chat-bubble">
              êµìˆ˜ë‹˜, Priceì™€ ê´€ë ¨í•´ì„œ ì§ˆë¬¸ì´ ìˆìŠµë‹ˆë‹¤!
            </div>
          </div>

          <!-- File Share Message -->
          <div class="chat-message">
            <div class="chat-header">
              <span class="chat-sender professor">ê¹€ì² ìˆ˜ (êµìˆ˜)</span>
              <span class="chat-time">10:20</span>
            </div>
            <div class="file-bubble">
              <div class="flex items-center gap-2 mb-2">
                <i data-lucide="paperclip" class="icon-sm text-muted"></i>
                <span class="text-sm">ì°¸ê³ ìë£Œë¥¼ ê³µìœ í•©ë‹ˆë‹¤</span>
              </div>
              <div class="file-card">
                <div class="flex items-center gap-2">
                  <i data-lucide="file-text" class="icon-md" style="color: hsl(var(--destructive))"></i>
                  <div>
                    <div class="text-sm font-medium">ë§ˆì¼€íŒ…4P_ìë£Œ.pdf</div>
                    <div class="text-xs text-muted">2.5MB</div>
                  </div>
                </div>
                <button class="btn btn-outline btn-sm w-full mt-2">
                  <i data-lucide="download" class="icon-xs"></i>
                  ë‹¤ìš´ë¡œë“œ
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Chat Input -->
        <div class="chat-input-area">
          <input type="text" class="input input-sm" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...">
          <div class="chat-input-actions">
            <button class="btn btn-ghost btn-icon btn-sm" onclick="openFileSharePopup()" title="íŒŒì¼ ê³µìœ ">
              <i data-lucide="paperclip" class="icon-sm"></i>
            </button>
            <button class="btn btn-ghost btn-icon btn-sm" title="ì´ëª¨ì§€">
              <i data-lucide="smile" class="icon-sm"></i>
            </button>
            <button class="btn btn-primary btn-icon btn-sm">
              <i data-lucide="send" class="icon-sm"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- DM Popup -->
  <div class="dm-popup" id="dmPopup">
    <div class="popup-header">
      <div class="header-title">
        <div class="avatar avatar-sm">
          <i data-lucide="user" class="icon-sm"></i>
        </div>
        <span class="font-semibold text-sm" id="dmRecipient">ë°•ì„œì—°</span>
        <span class="badge badge-outline text-xs">1:1</span>
      </div>
      <button class="close-btn" onclick="closeDmPopup()" title="ë‹«ê¸°">
        <i data-lucide="x" class="icon-sm"></i>
      </button>
    </div>
    <div class="dm-messages">
      <div class="dm-message mine">
        <div class="dm-bubble">ì•ˆë…•í•˜ì„¸ìš”, ì§ˆë¬¸ì´ ìˆìœ¼ì‹ ê°€ìš”?</div>
      </div>
      <div class="dm-message">
        <div class="dm-bubble">ë„¤, ê³¼ì œ ì œì¶œ ê¸°í•œì— ëŒ€í•´ ì—¬ì­¤ë³¼ê²Œìš”!</div>
      </div>
      <div class="dm-message mine">
        <div class="dm-bubble">ë„¤, ë§ì”€í•´ì£¼ì„¸ìš”.</div>
      </div>
    </div>
    <div class="chat-input-area">
      <input type="text" class="input input-sm" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...">
      <div class="chat-input-actions">
        <button class="btn btn-ghost btn-icon btn-sm">
          <i data-lucide="paperclip" class="icon-sm"></i>
        </button>
        <button class="btn btn-primary btn-icon btn-sm">
          <i data-lucide="send" class="icon-sm"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- File Share Popup -->
  <div class="file-share-popup" id="fileSharePopup">
    <div class="popup-header">
      <div class="header-title">
        <i data-lucide="paperclip" class="icon-md" style="color: hsl(var(--brand-primary))"></i>
        <span class="font-semibold text-sm">íŒŒì¼ ê³µìœ </span>
      </div>
      <button class="close-btn" onclick="closeFileSharePopup()" title="ë‹«ê¸°">
        <i data-lucide="x" class="icon-sm"></i>
      </button>
    </div>
    <div class="popup-content">
      <div class="file-drop-zone">
        <i data-lucide="upload" class="icon-lg text-muted mb-2"></i>
        <p class="text-sm text-muted">íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜</p>
        <p class="text-sm text-muted">í´ë¦­í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”</p>
      </div>
      <div class="flex gap-2">
        <button class="btn btn-outline btn-sm flex-1" onclick="closeFileSharePopup()">ì·¨ì†Œ</button>
        <button class="btn btn-primary btn-sm flex-1">ê³µìœ </button>
      </div>
    </div>
  </div>

  <!-- Reaction Popup -->
  <div class="reaction-popup" id="reactionPopup">
    <div class="flex items-center justify-between mb-3">
      <span class="font-semibold text-sm">ë°˜ì‘</span>
      <button class="close-btn" onclick="closeReactionPopup()" title="ë‹«ê¸°">
        <i data-lucide="x" class="icon-sm"></i>
      </button>
    </div>
    <div class="reaction-grid mb-3">
      <button class="reaction-btn" onclick="sendReaction('ğŸ‘')">
        <span class="reaction-emoji">ğŸ‘</span>
        <span class="reaction-label">ì¢‹ì•„ìš”</span>
      </button>
      <button class="reaction-btn" onclick="sendReaction('ğŸ‘')">
        <span class="reaction-emoji">ğŸ‘</span>
        <span class="reaction-label">ë°•ìˆ˜</span>
      </button>
      <button class="reaction-btn" onclick="sendReaction('â“')">
        <span class="reaction-emoji">â“</span>
        <span class="reaction-label">ì§ˆë¬¸</span>
      </button>
      <button class="reaction-btn" onclick="sendReaction('ğŸ‰')">
        <span class="reaction-emoji">ğŸ‰</span>
        <span class="reaction-label">ì¶•í•˜</span>
      </button>
      <button class="reaction-btn" onclick="sendReaction('ğŸ’¡')">
        <span class="reaction-emoji">ğŸ’¡</span>
        <span class="reaction-label">ì•„ì´ë””ì–´</span>
      </button>
    </div>
    <div class="reaction-grid">
      <button class="reaction-btn" onclick="sendReaction('ğŸ˜Š')">
        <span class="reaction-emoji">ğŸ˜Š</span>
        <span class="reaction-label">ì›ƒìŒ</span>
      </button>
      <button class="reaction-btn" onclick="sendReaction('ğŸ˜¢')">
        <span class="reaction-emoji">ğŸ˜¢</span>
        <span class="reaction-label">ìŠ¬í””</span>
      </button>
      <button class="reaction-btn" onclick="sendReaction('ğŸ˜®')">
        <span class="reaction-emoji">ğŸ˜®</span>
        <span class="reaction-label">ë†€ëŒ</span>
      </button>
      <button class="reaction-btn" onclick="sendReaction('ğŸ¤”')">
        <span class="reaction-emoji">ğŸ¤”</span>
        <span class="reaction-label">ìƒê°</span>
      </button>
      <button class="reaction-btn" onclick="sendReaction('â¤ï¸')">
        <span class="reaction-emoji">â¤ï¸</span>
        <span class="reaction-label">ì¢‹ì•„</span>
      </button>
    </div>
  </div>

  <!-- Screen Share Select Popup -->
  <div class="screen-share-popup" id="screenSharePopup">
    <div class="popup-header">
      <div class="header-title">
        <i data-lucide="monitor" class="icon-md" style="color: hsl(var(--brand-primary))"></i>
        <span class="font-semibold text-sm">í™”ë©´ ê³µìœ </span>
      </div>
      <button class="close-btn" onclick="closeScreenSharePopup()" title="ë‹«ê¸°">
        <i data-lucide="x" class="icon-sm"></i>
      </button>
    </div>
    <div class="popup-content">
      <p class="text-xs text-muted mb-3">ê³µìœ í•  í™”ë©´ì„ ì„ íƒí•˜ì„¸ìš”</p>

      <div class="text-xs font-semibold text-muted mb-2">ì „ì²´ í™”ë©´</div>
      <div class="screen-options-grid mb-3">
        <div class="screen-option selected" onclick="selectScreen(this)">
          <div class="screen-preview">
            <i data-lucide="monitor" class="icon-md text-muted"></i>
          </div>
          <div class="text-xs">ëª¨ë‹ˆí„° 1</div>
        </div>
        <div class="screen-option" onclick="selectScreen(this)">
          <div class="screen-preview">
            <i data-lucide="monitor" class="icon-md text-muted"></i>
          </div>
          <div class="text-xs">ëª¨ë‹ˆí„° 2</div>
        </div>
      </div>

      <div class="text-xs font-semibold text-muted mb-2">ì• í”Œë¦¬ì¼€ì´ì…˜</div>
      <div class="screen-options-grid mb-3">
        <div class="screen-option" onclick="selectScreen(this)">
          <div class="screen-preview">
            <i data-lucide="presentation" class="icon-md text-muted"></i>
          </div>
          <div class="text-xs">ë§ˆì¼€íŒ…4P.pptx</div>
        </div>
        <div class="screen-option" onclick="selectScreen(this)">
          <div class="screen-preview">
            <i data-lucide="globe" class="icon-md text-muted"></i>
          </div>
          <div class="text-xs">Chrome</div>
        </div>
      </div>

      <label class="flex items-center gap-2 mb-3">
        <input type="checkbox" class="checkbox">
        <span class="text-xs">ì‹œìŠ¤í…œ ì˜¤ë””ì˜¤ ê³µìœ </span>
      </label>

      <div class="flex gap-2">
        <button class="btn btn-outline btn-sm flex-1" onclick="closeScreenSharePopup()">ì·¨ì†Œ</button>
        <button class="btn btn-primary btn-sm flex-1" onclick="location.href='live-008-screen-sharing.html'">ê³µìœ  ì‹œì‘</button>
      </div>
    </div>
  </div>

  <!-- Breakout Room Setup Popup -->
  <div class="breakout-popup-overlay" id="breakoutPopup" style="position: fixed; inset: 0; background: rgba(0, 0, 0, 0.5); display: none; align-items: center; justify-content: center; z-index: 2000;">
    <div class="breakout-popup-content" style="background: hsl(var(--card)); border-radius: var(--radius-lg); width: 100%; max-width: 520px; max-height: 90vh; overflow-y: auto;">
      <div style="display: flex; align-items: center; justify-content: space-between; padding: var(--spacing-4); border-bottom: 1px solid hsl(var(--border)); position: sticky; top: 0; background: hsl(var(--card));">
        <div class="flex items-center gap-2">
          <i data-lucide="users" class="icon-md" style="color: hsl(var(--brand-primary))"></i>
          <h2 class="font-semibold">ë¶„ë°˜ ì„¤ì •</h2>
        </div>
        <button class="btn btn-ghost btn-icon btn-sm" onclick="closeBreakoutPopup()">
          <i data-lucide="x" class="icon-sm"></i>
        </button>
      </div>

      <div style="padding: var(--spacing-4);">
        <div style="display: flex; align-items: center; gap: var(--spacing-2); margin-bottom: var(--spacing-4);">
          <label class="text-sm font-medium">ë¶„ë°˜ ìˆ˜:</label>
          <input type="number" class="input" value="5" min="2" max="10" style="width: 80px; text-align: center;">
          <span class="text-sm text-muted">ê°œ</span>
        </div>

        <div style="margin-bottom: var(--spacing-4);">
          <label class="text-sm font-medium mb-2 block">ë°°ì • ë°©ì‹</label>
          <div style="display: flex; align-items: center; gap: var(--spacing-2); padding: var(--spacing-2) 0; font-size: var(--text-sm);">
            <input type="radio" name="assignment" checked>
            <span>ìë™ (ëœë¤)</span>
          </div>
          <div style="display: flex; align-items: center; gap: var(--spacing-2); padding: var(--spacing-2) 0; font-size: var(--text-sm);">
            <input type="radio" name="assignment">
            <span>ìë™ (ê· ë“± ë¶„ë°°)</span>
          </div>
          <div style="display: flex; align-items: center; gap: var(--spacing-2); padding: var(--spacing-2) 0; font-size: var(--text-sm);">
            <input type="radio" name="assignment">
            <span>ìë™ (ì„±ì  ê¸°ë°˜ í˜¼í•©)</span>
          </div>
          <div style="display: flex; align-items: center; gap: var(--spacing-2); padding: var(--spacing-2) 0; font-size: var(--text-sm);">
            <input type="radio" name="assignment">
            <span>ìˆ˜ë™ ë°°ì •</span>
          </div>
        </div>

        <div class="separator my-4"></div>

        <div style="margin-bottom: var(--spacing-4);">
          <div class="font-medium mb-2">ë¯¸ë¦¬ë³´ê¸°</div>
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--spacing-2);">
            <div style="background: hsl(var(--muted) / 0.3); border-radius: var(--radius-md); padding: var(--spacing-3);">
              <div style="font-weight: 500; font-size: var(--text-sm); margin-bottom: var(--spacing-2); color: hsl(var(--brand-primary));">ë¶„ë°˜ 1 (5ëª…)</div>
              <div style="font-size: var(--text-xs); color: hsl(var(--muted-foreground)); padding: var(--spacing-1) 0;">ì´ë¯¼ì¤€</div>
              <div style="font-size: var(--text-xs); color: hsl(var(--muted-foreground)); padding: var(--spacing-1) 0;">ë°•ì„œì—°</div>
              <div style="font-size: var(--text-xs); color: hsl(var(--muted-foreground)); padding: var(--spacing-1) 0;">ì •ë„ìœ¤</div>
              <div style="font-size: var(--text-xs); color: hsl(var(--muted-foreground)); padding: var(--spacing-1) 0;">...</div>
            </div>
            <div style="background: hsl(var(--muted) / 0.3); border-radius: var(--radius-md); padding: var(--spacing-3);">
              <div style="font-weight: 500; font-size: var(--text-sm); margin-bottom: var(--spacing-2); color: hsl(var(--brand-primary));">ë¶„ë°˜ 2 (5ëª…)</div>
              <div style="font-size: var(--text-xs); color: hsl(var(--muted-foreground)); padding: var(--spacing-1) 0;">ê°•ìˆ˜ì•„</div>
              <div style="font-size: var(--text-xs); color: hsl(var(--muted-foreground)); padding: var(--spacing-1) 0;">ê¹€ë¯¼ìˆ˜</div>
              <div style="font-size: var(--text-xs); color: hsl(var(--muted-foreground)); padding: var(--spacing-1) 0;">ìµœìœ ì§„</div>
              <div style="font-size: var(--text-xs); color: hsl(var(--muted-foreground)); padding: var(--spacing-1) 0;">...</div>
            </div>
            <div style="background: hsl(var(--muted) / 0.3); border-radius: var(--radius-md); padding: var(--spacing-3);">
              <div style="font-weight: 500; font-size: var(--text-sm); margin-bottom: var(--spacing-2); color: hsl(var(--brand-primary));">ë¶„ë°˜ 3 (5ëª…)</div>
              <div style="font-size: var(--text-xs); color: hsl(var(--muted-foreground)); padding: var(--spacing-1) 0;">ìœ ì§€ì›</div>
              <div style="font-size: var(--text-xs); color: hsl(var(--muted-foreground)); padding: var(--spacing-1) 0;">ì¥ë¯¼í˜¸</div>
              <div style="font-size: var(--text-xs); color: hsl(var(--muted-foreground)); padding: var(--spacing-1) 0;">...</div>
            </div>
            <div style="background: hsl(var(--muted) / 0.3); border-radius: var(--radius-md); padding: var(--spacing-3);">
              <div style="font-weight: 500; font-size: var(--text-sm); margin-bottom: var(--spacing-2); color: hsl(var(--brand-primary));">ë¶„ë°˜ 4 (5ëª…)</div>
              <div style="font-size: var(--text-xs); color: hsl(var(--muted-foreground)); padding: var(--spacing-1) 0;">ì„ìˆ˜ë¹ˆ</div>
              <div style="font-size: var(--text-xs); color: hsl(var(--muted-foreground)); padding: var(--spacing-1) 0;">ì¡°í˜„ìš°</div>
              <div style="font-size: var(--text-xs); color: hsl(var(--muted-foreground)); padding: var(--spacing-1) 0;">...</div>
            </div>
          </div>
        </div>

        <div class="separator my-4"></div>

        <div style="background: hsl(var(--muted) / 0.3); border-radius: var(--radius-md); padding: var(--spacing-3); margin-bottom: var(--spacing-4);">
          <label class="text-sm font-medium mb-2 block">ì„¤ì •</label>
          <div style="display: flex; align-items: center; gap: var(--spacing-2); margin-bottom: var(--spacing-2);">
            <i data-lucide="clock" class="icon-sm text-muted"></i>
            <span class="text-sm">í† ë¡  ì‹œê°„:</span>
            <input type="number" class="input" value="10" style="width: 60px;">
            <span class="text-sm">ë¶„</span>
          </div>
          <div style="display: flex; flex-direction: column; gap: var(--spacing-2); margin-top: var(--spacing-2);">
            <label style="display: flex; align-items: center; gap: var(--spacing-2); font-size: var(--text-sm);">
              <input type="checkbox" checked>
              <span>íƒ€ì´ë¨¸ í‘œì‹œ</span>
            </label>
            <label style="display: flex; align-items: center; gap: var(--spacing-2); font-size: var(--text-sm);">
              <input type="checkbox" checked>
              <span>1ë¶„ ì „ ì•Œë¦¼</span>
            </label>
            <label style="display: flex; align-items: center; gap: var(--spacing-2); font-size: var(--text-sm);">
              <input type="checkbox">
              <span>ìë™ ë³µê·€</span>
            </label>
          </div>
        </div>

        <div class="mb-4">
          <label class="text-sm font-medium mb-2 block">í† ë¡  ì£¼ì œ (ì„ íƒ)</label>
          <textarea class="input" rows="2" placeholder="í† ë¡  ì£¼ì œë¥¼ ì…ë ¥í•˜ì„¸ìš”">ë§ˆì¼€íŒ… ì „ëµ ì‚¬ë¡€ ë¶„ì„</textarea>
        </div>
      </div>

      <div style="padding: var(--spacing-4); border-top: 1px solid hsl(var(--border)); display: flex; justify-content: space-between; position: sticky; bottom: 0; background: hsl(var(--card));">
        <button class="btn btn-ghost" onclick="closeBreakoutPopup()">ì·¨ì†Œ</button>
        <div class="flex gap-2">
          <a href="../e4-active/brk-002-manual-assign.html" class="btn btn-outline">
            <i data-lucide="shuffle" class="icon-sm"></i>
            ì¬ë°°ì •
          </a>
          <a href="../e4-active/brk-003-monitor.html" class="btn btn-primary">ë¶„ë°˜ ì‹œì‘</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Network Warning Modal -->
  <div class="network-warning-modal" id="networkWarningModal">
    <div class="network-warning-content">
      <div class="network-warning-header">
        <i data-lucide="wifi-off" class="icon-md" style="color: hsl(var(--destructive))"></i>
        <span class="font-semibold">ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë¶ˆì•ˆì •</span>
      </div>
      <div class="network-warning-body">
        <p class="text-sm mb-3">
          <strong>ê°•ìˆ˜ì•„</strong> í•™ìƒì˜ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ë¶ˆì•ˆì •í•©ë‹ˆë‹¤.
        </p>
        <p class="text-sm text-muted mb-3">
          ë¹„ë””ì˜¤ í’ˆì§ˆì´ ìë™ìœ¼ë¡œ ë‚®ì•„ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </p>
        <div class="bg-muted/30 p-3 rounded-md">
          <p class="text-sm font-medium mb-2">ê¶Œì¥ ì¡°ì¹˜:</p>
          <ul class="text-sm text-muted space-y-1">
            <li class="flex items-center gap-2">
              <i data-lucide="wifi" class="icon-xs"></i>
              Wi-Fi ì—°ê²° í™•ì¸
            </li>
            <li class="flex items-center gap-2">
              <i data-lucide="refresh-cw" class="icon-xs"></i>
              ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ë¡œ ì „í™˜
            </li>
            <li class="flex items-center gap-2">
              <i data-lucide="video-off" class="icon-xs"></i>
              ë¹„ë””ì˜¤ OFFë¡œ ì „í™˜
            </li>
          </ul>
        </div>
      </div>
      <div class="network-warning-footer">
        <button class="btn btn-outline btn-sm" onclick="closeNetworkWarningModal()">ë¬´ì‹œ</button>
        <a href="live-021-network-warning.html" class="btn btn-primary btn-sm">ìƒì„¸ ë³´ê¸°</a>
      </div>
    </div>
  </div>

  <!-- Mini Analytics Popup -->
  <div class="analytics-popup" id="analyticsPopup">
    <header class="popup-header">
      <div class="header-title">
        <i data-lucide="bar-chart-2" class="icon-md" style="color: hsl(var(--brand-primary))"></i>
        <span class="font-semibold text-sm">ì‹¤ì‹œê°„ ì°¸ì—¬ë„</span>
        <span class="session-time">45:23</span>
      </div>
      <div class="header-actions">
        <div class="view-toggle">
          <button class="view-btn active">ë¯¸ë‹ˆ ë·°</button>
          <a href="../e6-analytics/analytics-001-realtime.html" class="view-btn">ì „ì²´ ë·°</a>
        </div>
        <button class="close-btn" onclick="closeAnalyticsPopup()" title="ë‹«ê¸°">
          <i data-lucide="x" class="icon-sm"></i>
        </button>
      </div>
    </header>
    <div class="popup-content">
      <!-- ì „ì²´ ì°¸ì—¬ í˜„í™© -->
      <div class="mini-overview-card">
        <div class="flex items-center gap-2 mb-2">
          <i data-lucide="trending-up" class="icon-sm" style="color: hsl(var(--brand-primary))"></i>
          <span class="font-semibold text-sm">ì „ì²´ ì°¸ì—¬ í˜„í™©</span>
        </div>
        <div class="mini-stats-grid">
          <div class="mini-stat-item">
            <div class="mini-stat-value">94%</div>
            <div class="mini-stat-label">ì°¸ì—¬ìœ¨</div>
          </div>
          <div class="mini-stat-item">
            <div class="mini-stat-value">2.3</div>
            <div class="mini-stat-label">í‰ê· ë°œì–¸</div>
          </div>
          <div class="mini-stat-item">
            <div class="mini-stat-value">45/48</div>
            <div class="mini-stat-label">í™œì„±ì°¸ê°€</div>
          </div>
        </div>
        <div class="mini-chart">
          <div class="text-xs text-muted mb-1">ì°¸ì—¬ íŠ¸ë Œë“œ (30ë¶„)</div>
          <div class="text-xs text-muted text-center" style="padding-top: 20px;">
            [ì‹¤ì‹œê°„ ì°¸ì—¬ìœ¨ ì°¨íŠ¸]
          </div>
        </div>
      </div>

      <!-- í•™ìƒë³„ ë°œì–¸ ì‹œê°„ -->
      <div class="mini-talktime-card">
        <div class="mini-talktime-header">
          <div class="flex items-center gap-2">
            <i data-lucide="mic" class="icon-sm" style="color: hsl(var(--brand-primary))"></i>
            <span class="font-semibold text-sm">ë°œì–¸ ì‹œê°„</span>
          </div>
        </div>
        <div class="mini-talktime-content">
          <div class="student-bar">
            <span class="student-name">ì´ì˜í¬</span>
            <div class="bar-container"><div class="bar-fill high" style="width: 87%;"></div></div>
            <span class="time-value">8:45</span>
          </div>
          <div class="student-bar">
            <span class="student-name">ê¹€ì² ìˆ˜</span>
            <div class="bar-container"><div class="bar-fill high" style="width: 72%;"></div></div>
            <span class="time-value">7:12</span>
          </div>
          <div class="student-bar">
            <span class="student-name">ë°•ë¯¼ìˆ˜</span>
            <div class="bar-container"><div class="bar-fill" style="width: 55%;"></div></div>
            <span class="time-value">5:30</span>
          </div>
          <div class="student-bar">
            <span class="student-name">ì¡°ë¯¼ì¤€</span>
            <div class="bar-container"><div class="bar-fill warning" style="width: 14%;"></div></div>
            <span class="time-value">1:25</span>
          </div>
          <div class="student-bar">
            <span class="student-name">ê¶Œíƒœí¬</span>
            <div class="bar-container"><div class="bar-fill danger" style="width: 1%;"></div></div>
            <span class="time-value">0:12</span>
          </div>

          <div class="mini-alert">
            <i data-lucide="alert-circle" class="icon-xs"></i>
            <span><strong>30ë¶„+ ë¬´ì°¸ì—¬:</strong> ê¶Œíƒœí¬, ì˜¤ì§€í›ˆ, ë°±ìŠ¹ë¯¼</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    lucide.createIcons();

    const analyticsPopup = document.getElementById('analyticsPopup');
    const screenSharePopup = document.getElementById('screenSharePopup');

    function openAnalyticsPopup() {
      analyticsPopup.classList.add('show');
      lucide.createIcons();
    }

    function closeAnalyticsPopup() {
      analyticsPopup.classList.remove('show');
    }

    function openScreenSharePopup() {
      screenSharePopup.classList.add('show');
      lucide.createIcons();
    }

    function closeScreenSharePopup() {
      screenSharePopup.classList.remove('show');
    }

    function selectScreen(element) {
      document.querySelectorAll('.screen-option').forEach(opt => opt.classList.remove('selected'));
      element.classList.add('selected');
    }

    // Tab switching
    function showTab(tabName) {
      const participantsTab = document.getElementById('participantsTab');
      const chatTab = document.getElementById('chatTab');
      const tabs = document.querySelectorAll('.panel-tab');

      tabs.forEach(tab => tab.classList.remove('active'));

      if (tabName === 'participants') {
        participantsTab.style.display = 'block';
        chatTab.style.display = 'none';
        tabs[0].classList.add('active');
      } else {
        participantsTab.style.display = 'none';
        chatTab.style.display = 'flex';
        chatTab.style.flexDirection = 'column';
        tabs[1].classList.add('active');
      }
      lucide.createIcons();
    }

    // DM Popup
    const dmPopup = document.getElementById('dmPopup');
    function openDmPopup(name) {
      document.getElementById('dmRecipient').textContent = name;
      dmPopup.classList.add('show');
      lucide.createIcons();
    }
    function closeDmPopup() {
      dmPopup.classList.remove('show');
    }

    // File Share Popup
    const fileSharePopup = document.getElementById('fileSharePopup');
    function openFileSharePopup() {
      fileSharePopup.classList.add('show');
      lucide.createIcons();
    }
    function closeFileSharePopup() {
      fileSharePopup.classList.remove('show');
    }

    // Reaction Popup
    const reactionPopup = document.getElementById('reactionPopup');
    function openReactionPopup() {
      reactionPopup.classList.add('show');
      lucide.createIcons();
    }
    function closeReactionPopup() {
      reactionPopup.classList.remove('show');
    }
    function sendReaction(emoji) {
      closeReactionPopup();
      const mainVideo = document.getElementById('mainVideo');
      // Create multiple floating reactions
      for (let i = 0; i < 3; i++) {
        setTimeout(() => {
          createFloatingReaction(mainVideo, emoji);
        }, i * 150);
      }
    }
    function createFloatingReaction(container, emoji) {
      const reaction = document.createElement('div');
      reaction.className = 'floating-reaction';
      reaction.textContent = emoji;
      // Random horizontal position
      const randomX = Math.random() * 80 + 10; // 10% to 90%
      reaction.style.left = randomX + '%';
      reaction.style.bottom = '20%';
      container.appendChild(reaction);
      // Remove after animation
      setTimeout(() => {
        reaction.remove();
      }, 3000);
    }

    // Layout Popup
    const layoutPopup = document.getElementById('layoutPopup');
    function openLayoutPopup() {
      layoutPopup.classList.add('show');
      lucide.createIcons();
    }
    function closeLayoutPopup() {
      layoutPopup.classList.remove('show');
    }

    // Network Warning Modal
    const networkWarningModal = document.getElementById('networkWarningModal');
    function openNetworkWarningModal() {
      networkWarningModal.classList.add('show');
      lucide.createIcons();
    }
    function closeNetworkWarningModal() {
      networkWarningModal.classList.remove('show');
    }
    // Close modal when clicking outside
    networkWarningModal.addEventListener('click', function(e) {
      if (e.target === networkWarningModal) {
        closeNetworkWarningModal();
      }
    });

    // Breakout Room Popup
    const breakoutPopup = document.getElementById('breakoutPopup');
    function openBreakoutPopup() {
      breakoutPopup.style.display = 'flex';
      lucide.createIcons();
    }
    function closeBreakoutPopup() {
      breakoutPopup.style.display = 'none';
    }
    // Close popup when clicking outside
    breakoutPopup.addEventListener('click', function(e) {
      if (e.target === breakoutPopup) {
        closeBreakoutPopup();
      }
    });

    // URL íŒŒë¼ë¯¸í„°ë¡œ ë¯¸ë‹ˆë·° ìë™ ì—´ê¸°
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('analytics') === 'mini') {
      openAnalyticsPopup();
    }
  </script>
</body>
</html>
